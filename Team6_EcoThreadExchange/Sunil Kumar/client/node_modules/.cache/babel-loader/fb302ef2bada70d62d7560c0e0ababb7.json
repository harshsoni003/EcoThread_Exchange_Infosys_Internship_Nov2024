{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SUNIL\\\\OneDrive\\\\Desktop\\\\copy\\\\client\\\\src\\\\components\\\\userMain\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Footer from './Footer';\nimport ProductCard from './ProductCard';\nimport styles from './styles.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserMain = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [userData, setUserData] = useState(null); // Check token on component mount\n\n  useEffect(() => {\n    const token = sessionStorage.getItem('token');\n\n    if (!token) {\n      alert('Please log in first');\n      navigate('/login'); // Only redirect if no token found\n    } else {\n      // Fetch user data if token exists\n      fetchUserData(token);\n    }\n  }, [navigate]);\n\n  const fetchUserData = token => {\n    fetch('http://localhost:8080/api/current-user', {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(response => response.json()).then(data => setUserData(data)).catch(error => console.error('Error fetching user:', error));\n  };\n\n  const handleAddNewItem = () => {\n    const token = sessionStorage.getItem('token');\n\n    if (!token) {\n      alert('Please log in first');\n      navigate('/login'); // Ensure the user is logged in before adding new item\n    } else {\n      // Navigate to \"Add New Item\" page if logged in\n      navigate('/new-item');\n    }\n  };\n\n  const handleLogout = () => {\n    sessionStorage.removeItem('token'); // Clear token on logout\n\n    sessionStorage.removeItem('role');\n    navigate('/login');\n  }; // Example items data\n\n\n  const recommendedItems = [{\n    title: 'Levis Jeans: 2 Years Old',\n    date: '22 Jan 2024',\n    image: 'https://images.unsplash.com/photo-1542272604-787c3835535d?auto=format&fit=crop&q=80',\n    preferences: ['Jeans', 'Jackets', 'Boots']\n  }, {\n    title: 'Lilac Purse from Canada',\n    date: '22 Jan 2024',\n    image: 'https://images.unsplash.com/photo-1598532163257-ae3c6b2524b6?auto=format&fit=crop&q=80',\n    preferences: ['Jeans', 'Jackets', 'Bags']\n  }];\n  const tradeItems = [{\n    title: 'Rechargeable Batteries 1 Year Old',\n    date: '15 Jan 2024',\n    image: 'https://images.unsplash.com/photo-1619641805634-b867f535071f?auto=format&fit=crop&q=80',\n    preferences: ['Electronics', 'Art']\n  }, {\n    title: 'Denim Jacket Lee Cooper XL',\n    date: '15 Jan 2024',\n    image: 'https://images.unsplash.com/photo-1601333144130-8cbb312386b6?auto=format&fit=crop&q=80',\n    preferences: ['Jackets', 'Casual', 'Bags']\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.section,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.sectionHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Welcome, \", userData ? userData.name : 'User']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddNewItem,\n            className: styles.button,\n            children: \"Add New Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: styles.button,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.sectionHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Recommended Items\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/items'),\n            className: styles.button,\n            children: \"Go to My Items\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.grid,\n          children: recommendedItems.map((item, index) => /*#__PURE__*/_jsxDEV(ProductCard, { ...item\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.section,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.sectionHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"My Trades (2)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/trades'),\n            className: styles.button,\n            children: \"Go to My Trades\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.grid,\n          children: tradeItems.map((item, index) => /*#__PURE__*/_jsxDEV(ProductCard, { ...item\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserMain, \"2mGV6gUwJELGOttQjmxgLOaxUeY=\", false, function () {\n  return [useNavigate];\n});\n\n_c = UserMain;\nexport default UserMain;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserMain\");","map":{"version":3,"sources":["C:/Users/SUNIL/OneDrive/Desktop/copy/client/src/components/userMain/index.jsx"],"names":["React","useState","useEffect","useNavigate","Footer","ProductCard","styles","UserMain","navigate","userData","setUserData","token","sessionStorage","getItem","alert","fetchUserData","fetch","headers","then","response","json","data","catch","error","console","handleAddNewItem","handleLogout","removeItem","recommendedItems","title","date","image","preferences","tradeItems","container","main","section","sectionHeader","name","button","grid","map","item","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Footer from './Footer';\r\nimport ProductCard from './ProductCard';\r\nimport styles from './styles.module.css';\r\n\r\nconst UserMain = () => {\r\n  const navigate = useNavigate();\r\n  const [userData, setUserData] = useState(null);\r\n\r\n  // Check token on component mount\r\n  useEffect(() => {\r\n    const token = sessionStorage.getItem('token');\r\n    if (!token) {\r\n      alert('Please log in first');\r\n      navigate('/login'); // Only redirect if no token found\r\n    } else {\r\n      // Fetch user data if token exists\r\n      fetchUserData(token);\r\n    }\r\n  }, [navigate]);\r\n\r\n  const fetchUserData = (token) => {\r\n    fetch('http://localhost:8080/api/current-user', {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => setUserData(data))\r\n      .catch((error) => console.error('Error fetching user:', error));\r\n  };\r\n\r\n  const handleAddNewItem = () => {\r\n    const token = sessionStorage.getItem('token');\r\n    if (!token) {\r\n      alert('Please log in first');\r\n      navigate('/login'); // Ensure the user is logged in before adding new item\r\n    } else {\r\n      // Navigate to \"Add New Item\" page if logged in\r\n      navigate('/new-item');\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    sessionStorage.removeItem('token'); // Clear token on logout\r\n    sessionStorage.removeItem('role');\r\n    navigate('/login');\r\n  };\r\n\r\n  // Example items data\r\n  const recommendedItems = [\r\n    {\r\n      title: 'Levis Jeans: 2 Years Old',\r\n      date: '22 Jan 2024',\r\n      image: 'https://images.unsplash.com/photo-1542272604-787c3835535d?auto=format&fit=crop&q=80',\r\n      preferences: ['Jeans', 'Jackets', 'Boots']\r\n    },\r\n    {\r\n      title: 'Lilac Purse from Canada',\r\n      date: '22 Jan 2024',\r\n      image: 'https://images.unsplash.com/photo-1598532163257-ae3c6b2524b6?auto=format&fit=crop&q=80',\r\n      preferences: ['Jeans', 'Jackets', 'Bags']\r\n    }\r\n  ];\r\n\r\n  const tradeItems = [\r\n    {\r\n      title: 'Rechargeable Batteries 1 Year Old',\r\n      date: '15 Jan 2024',\r\n      image: 'https://images.unsplash.com/photo-1619641805634-b867f535071f?auto=format&fit=crop&q=80',\r\n      preferences: ['Electronics', 'Art']\r\n    },\r\n    {\r\n      title: 'Denim Jacket Lee Cooper XL',\r\n      date: '15 Jan 2024',\r\n      image: 'https://images.unsplash.com/photo-1601333144130-8cbb312386b6?auto=format&fit=crop&q=80',\r\n      preferences: ['Jackets', 'Casual', 'Bags']\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <main className={styles.main}>\r\n        <section className={styles.section}>\r\n          <div className={styles.sectionHeader}>\r\n            <h2>Welcome, {userData ? userData.name : 'User'}</h2>\r\n            <button onClick={handleAddNewItem} className={styles.button}>\r\n              Add New Item\r\n            </button>\r\n            <button onClick={handleLogout} className={styles.button}>\r\n              Logout\r\n            </button>\r\n          </div>\r\n          <div className={styles.sectionHeader}>\r\n            <h2>Recommended Items</h2>\r\n            <button onClick={() => navigate('/items')} className={styles.button}>\r\n              Go to My Items\r\n            </button>\r\n          </div>\r\n          <div className={styles.grid}>\r\n            {recommendedItems.map((item, index) => (\r\n              <ProductCard key={index} {...item} />\r\n            ))}\r\n          </div>\r\n        </section>\r\n\r\n        <section className={styles.section}>\r\n          <div className={styles.sectionHeader}>\r\n            <h2>My Trades (2)</h2>\r\n            <button onClick={() => navigate('/trades')} className={styles.button}>\r\n              Go to My Trades\r\n            </button>\r\n          </div>\r\n          <div className={styles.grid}>\r\n            {tradeItems.map((item, index) => (\r\n              <ProductCard key={index} {...item} />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserMain;\r\n"]},"metadata":{},"sourceType":"module"}